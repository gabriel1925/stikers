<div class="container">
    <div class="row">
        <h1 class="text-center">Carga inventario Elit</h1>
        <form action="/cargaelist" class="formulario">
            <div class="form-check form-check-inline">
                <input class="form-check-input provincias" type="radio" name="provincia" id="mendoza" value="00013"
                    checked>
                <label class="form-check-label" for="mendoza">
                    Mendoza
                </label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input provincias" type="radio" name="provincia" id="buenosAires" value="00031">
                <label class="form-check-label" for="buenosAires">
                    Buenos Aires
                </label>
            </div>
            <input type="text" name="nfactura" value="00013" id="numeroFactura" class="shadow mb-3">
            <input type="hidden" name="empresa" value="ELIT SA">
            <div id="checkform">

            </div>
            <div class="row">
                <div class="col-4">
                    <input type="search" name="sku" list="datalistOptions" class="shadow w-100" id="search" autocomplete="off"
                        placeholder="SKU">
                    <div id="autocomplete" class=" position-absolute  col-3">
                        <div class="border px-1 zindexalto">
                            <div class="row">
                                <span class="nombre col-8">INTEL I7-9700</span>
                                <span class="sku col-4">SKU: 1001</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-4">
                    <input type="number" name="cantidad" class="w-100 shadow" placeholder="Cantidad">
                </div>
                <div class="col-4">
                    <button class="btn w-100 btn-warning shadow" id="agregar">Agregar</button>
                </div>
            </div>
            <div class="row h-100 mx-1 my-4 w-100">
                <div class="template-add">
                    <div class="row">
                        <div class="col-5 bg-primary py-1 h-100 rounded shadow ">
                            <span>this name</span> <br>
                            <span>this.sku</span>
                        </div>
                        <div class="col-5">
                            <input type="number" class="w-100 h-100 shadow" placeholder="Cantidad">
                        </div>
                        <div class="col-2">
                            <button class="btn btn-danger h-100">Borrar</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<script src="https://momentjs.com/downloads/moment-with-locales.min.js"></script>

<script>
    moment.locale('es-mx')
    //console.log(moment().format('DDMMYYYY')); 
    for (let index = 0; index < 10; index++) {
        document.getElementById('checkform').innerHTML += `<div class="form-check form-check-inline">
                                                                <input class="form-check-input" type="radio" name="fechacompra" id="flexRadioDefault`+ index + `" value="` + moment().subtract(index, 'days').format('DDMMYY') + `">
                                                                <label class="form-check-label" for="flexRadioDefault`+ index + `">
                                                                    `+ moment().subtract(index, 'days').format('DD/MM/YY') + `
                                                                </label>
                                                            </div>`

    }
    let provincias = Array.prototype.slice.apply(document.querySelectorAll('.provincias'))
    provincias.map((e) => {
        e.addEventListener('click', (e) => {
            document.getElementById('numeroFactura').value = e.path[0].defaultValue
        })
    })
</script>
{{!-- busco los productos --}}
<script>
    document.addEventListener("DOMContentLoaded", async function (event) {
        let $templateautocomplete = document.querySelector('#autocomplete').content
        let $search = document.getElementById('search')
        let $fragmento = document.createDocumentFragment()
        let $clone = document.importNode($templateautocomplete,true)
        console.log($clone)

        //console.log($templateautocomplete)
        //$templateautocomplete.querySelector('.sku').innerHTML = ""
        //cancelamos enter

        //cambiar de focus al tocar next
        let inputs = Array.prototype.slice.apply(document.querySelectorAll('form input'))
        inputs.map((e, index) => {
            e.addEventListener('keydown', (ev) => {
                if (ev.key === 'Enter') {
                    if (index === 16) {
                        inputs[0].focus()
                    } else {
                        ev.preventDefault()
                        console.log(index)
                        inputs[index + 1].focus()
                        if (index === 2) {
                            inputs[4].focus()
                        }
                    }
                }
            })

        })
    });

</script>
{{!-- Agrego los productos --}}

<style>
    .zindexalto {
        z-index: 2000 !important;
        background-color: white;
        width: 100% !important;
    }

    .zindexalto .row:hover {
        z-index: 2000 !important;
        background-color: aliceblue;
        width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
    }
</style>